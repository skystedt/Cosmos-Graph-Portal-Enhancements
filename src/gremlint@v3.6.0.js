var T=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Q(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}function G(C,e,r){return r={path:e,exports:{},require:function(c,o){return F(c,o==null?r.path:o)}},C(r,r.exports),r.exports}function F(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var g=G(function(C,e){Object.defineProperty(e,"__esModule",{value:!0}),e.TokenType=void 0,function(r){r.NonGremlinCode="NON_GREMLIN_CODE",r.Traversal="TRAVERSAL",r.Method="METHOD",r.Closure="CLOSURE",r.String="STRING",r.Word="WORD"}(e.TokenType||(e.TokenType={}))}),y=G(function(C,e){Object.defineProperty(e,"__esModule",{value:!0}),e.choose=e.count=e.sum=e.neq=e.eq=e.spaces=e.pipe=e.last=void 0;var r=function(s){return s.slice(-1)[0]};e.last=r;var c=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return function(I){return s.reduce(function(m,w){return w(m)},I)}};e.pipe=c;var o=function(s){return Array(s+1).join(" ")};e.spaces=o;var u=function(s){return function(l){return s===l}};e.eq=u;var i=function(s){return function(l){return s!==l}};e.neq=i;var n=function(s,l){return s+l};e.sum=n;var a=function(s){var l;return(l=s==null?void 0:s.length)!==null&&l!==void 0?l:0};e.count=a;var f=function(s,l,I){return function(){for(var m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];return s.apply(void 0,m)?l.apply(void 0,m):I.apply(void 0,m)}};e.choose=f}),b=G(function(C,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(c){return c===void 0&&(c=0),function(o){switch(o.type){case g.TokenType.NonGremlinCode:return o.code;case g.TokenType.Traversal:return y.spaces(c)+o.steps.map(r()).join(".");case g.TokenType.Method:return y.spaces(c)+r()(o.method)+"("+o.arguments.map(r()).join(", ")+")";case g.TokenType.Closure:return y.spaces(c)+r()(o.method)+"{"+y.last(o.closureCodeBlock.map(function(u){var i=u.lineOfCode,n=u.relativeIndentation;return""+y.spaces(Math.max(n,0))+i}))+"}";case g.TokenType.String:return y.spaces(c)+o.string;case g.TokenType.Word:return y.spaces(c)+o.word}}};e.default=r}),k=G(function(C,e){var r=T&&T.__assign||function(){return r=Object.assign||function(s){for(var l,I=1,m=arguments.length;I<m;I++){l=arguments[I];for(var w in l)Object.prototype.hasOwnProperty.call(l,w)&&(s[w]=l[w])}return s},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.withIncreasedHorizontalPosition=e.withHorizontalPosition=e.withNoEndDotInfo=e.withZeroDotInfo=e.withDotInfo=e.withIncreasedIndentation=e.withZeroIndentation=e.withIndentation=void 0;var c=function(s){return function(l){return r(r({},l),{localIndentation:s})}};e.withIndentation=c,e.withZeroIndentation=e.withIndentation(0);var o=function(s){return function(l){return r(r({},l),{localIndentation:l.localIndentation+s})}};e.withIncreasedIndentation=o;var u=function(s){var l=s.shouldStartWithDot,I=s.shouldEndWithDot;return function(m){return r(r({},m),{shouldStartWithDot:l,shouldEndWithDot:I})}};e.withDotInfo=u;var i=function(s){return r(r({},s),{shouldStartWithDot:!1,shouldEndWithDot:!1})};e.withZeroDotInfo=i;var n=function(s){return r(r({},s),{shouldEndWithDot:!1})};e.withNoEndDotInfo=n;var a=function(s){return function(l){return r(r({},l),{horizontalPosition:s})}};e.withHorizontalPosition=a;var f=function(s){return function(l){return r(r({},l),{horizontalPosition:l.horizontalPosition+s})}};e.withIncreasedHorizontalPosition=f}),N=G(function(C,e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatClosure=void 0;var r=function(i,n,a,f){return f===0?Math.max(i,0):Math.max(i+n+a+1,0)},c=function(i,n){return function(a,f){var s=a.lineOfCode,l=a.relativeIndentation;return{lineOfCode:s,relativeIndentation:l,localIndentation:r(l,i,n,f)}}},o=function(i,n,a){return i.map(c(n,a))},u=function(i){return function(n){return function(a){var f=a.closureCodeBlock,s=a.method,l=n.localIndentation,I=n.horizontalPosition,m=n.maxLineLength,w=n.shouldEndWithDot,D=b.default(l)(a),E=i(k.withNoEndDotInfo(n))(s),P=E.width;return D.length<=m?{type:g.TokenType.Closure,method:E,closureCodeBlock:o(f,I,P),localIndentation:l,width:D.trim().length,shouldStartWithDot:!1,shouldEndWithDot:Boolean(w)}:{type:g.TokenType.Closure,method:E,closureCodeBlock:o(f,I,P),localIndentation:0,width:0,shouldStartWithDot:!1,shouldEndWithDot:Boolean(w)}}}};e.formatClosure=u}),H=G(function(C,e){var r=T&&T.__spreadArray||function(o,u){for(var i=0,n=u.length,a=o.length;i<n;i++,a++)o[a]=u[i];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.formatMethod=void 0;var c=function(o){return function(u){return function(i){var n=b.default(u.localIndentation)(i),a=o(k.withNoEndDotInfo(u))(i.method),f=n.length<=u.maxLineLength;if(f)return{type:g.TokenType.Method,method:a,arguments:i.arguments,argumentGroups:[i.arguments.reduce(function(m,w){return r(r([],m),[o(y.pipe(k.withZeroIndentation,k.withZeroDotInfo,k.withIncreasedHorizontalPosition(a.width+1+m.map(function(D){var E=D.width;return E}).reduce(y.sum,0)+m.length))(u))(w)])},[])],argumentsShouldStartOnNewLine:!1,localIndentation:u.localIndentation,shouldStartWithDot:!1,shouldEndWithDot:Boolean(u.shouldEndWithDot),width:n.trim().length};var s=i.arguments.map(function(m){return[o(y.pipe(k.withIncreasedIndentation(2),k.withZeroDotInfo,k.withHorizontalPosition(u.localIndentation+2))(u))(m)]}),l=y.last(s),I=l?l.map(function(m){var w=m.width;return w}).reduce(y.sum,0)+l.length-1:0;return{type:g.TokenType.Method,method:a,arguments:i.arguments,argumentGroups:s,argumentsShouldStartOnNewLine:!0,shouldStartWithDot:!1,shouldEndWithDot:Boolean(u.shouldEndWithDot),localIndentation:0,width:I}}}};e.formatMethod=c}),R=G(function(C,e){var r=T&&T.__assign||function(){return r=Object.assign||function(o){for(var u,i=1,n=arguments.length;i<n;i++){u=arguments[i];for(var a in u)Object.prototype.hasOwnProperty.call(u,a)&&(o[a]=u[a])}return o},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.formatNonGremlin=void 0;var c=function(o){return function(u){return r(r({},u),{width:y.count(y.last(u.code.split(`
`)))})}};e.formatNonGremlin=c}),z=G(function(C,e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatString=void 0;var r=function(c){return function(o){return{type:g.TokenType.String,string:o.string,localIndentation:c.localIndentation,width:o.string.length+2}}};e.formatString=r}),q=G(function(C,e){Object.defineProperty(e,"__esModule",{value:!0}),e.STEP_MODULATORS=void 0,e.STEP_MODULATORS=["as","as_","by","emit","option","from","from_","to","read","times","until","with","with_","write"]}),B=G(function(C,e){var r=T&&T.__assign||function(){return r=Object.assign||function(f){for(var s,l=1,I=arguments.length;l<I;l++){s=arguments[l];for(var m in s)Object.prototype.hasOwnProperty.call(s,m)&&(f[m]=s[m])}return f},r.apply(this,arguments)},c=T&&T.__spreadArray||function(f,s){for(var l=0,I=s.length,m=f.length;l<I;l++,m++)f[m]=s[l];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.shouldStepBeLastStepInStepGroup=e.isStepFirstStepInStepGroup=e.isModulator=e.isTraversalSource=void 0;var o=function(f){return f.type===g.TokenType.Word&&f.word==="g"};e.isTraversalSource=o;var u=function(f){return f.type!==g.TokenType.Method&&f.type!==g.TokenType.Closure||f.method.type!==g.TokenType.Word?!1:q.STEP_MODULATORS.includes(f.method.word)};e.isModulator=u;var i=function(f){var s=f.stepsInStepGroup;return!s.length};e.isStepFirstStepInStepGroup=i;var n=function(f){return function(s,l,I,m){var w=s.stepsInStepGroup,D=s.stepGroups,E=m.slice(I+1).reduce(function(d,p){var _=d.stepsInStepGroup,S=d.hasReachedFinalModulator;return S?d:e.isModulator(p)?r(r({},d),{stepsInStepGroup:c(c([],_),[p])}):r(r({},d),{hasReachedFinalModulator:!0})},{stepsInStepGroup:c(c([],w),[l]),hasReachedFinalModulator:!1}).stepsInStepGroup,P=function(){var d=D[0]&&e.isTraversalSource(D[0].steps[0])?2:0,p=e.isModulator(c(c([],w),[l])[0])?2:0,_=d+p;return _}(),W=b.default(f.localIndentation+P)({type:g.TokenType.Traversal,steps:E}),M=W.length>f.maxLineLength;return M}},a=function(f){return function(s,l,I,m){var w=s.stepsInStepGroup,D=s.stepGroups,E=!w.length,P=I===m.length-1,W=!P&&e.isModulator(m[I+1]),M=n(f)({stepsInStepGroup:w,stepGroups:D},l,I,m),d=P||E&&e.isModulator(l)||(l.type===g.TokenType.Method||l.type===g.TokenType.Closure)&&!(W&&!M);return d}};e.shouldStepBeLastStepInStepGroup=a}),Z=G(function(C,e){var r=T&&T.__spreadArray||function(o,u){for(var i=0,n=u.length,a=o.length;i<n;i++,a++)o[a]=u[i];return o};Object.defineProperty(e,"__esModule",{value:!0});var c=function(o,u){return function(i,n,a,f){var s=i.stepsInStepGroup,l=i.stepGroups,I=l.length===0,m=a===f.length-1,w=l[0]&&B.isTraversalSource(l[0].steps[0])?2:0,D=B.isModulator(n)?2:0,E=u.localIndentation+w+D,P=!I&&u.shouldPlaceDotsAfterLineBreaks,W=!m&&!u.shouldPlaceDotsAfterLineBreaks;return{stepsInStepGroup:[],stepGroups:r(r([],l),[{steps:[o(y.pipe(k.withIndentation(E),k.withDotInfo({shouldStartWithDot:P,shouldEndWithDot:W}),k.withHorizontalPosition(E+ +u.shouldPlaceDotsAfterLineBreaks))(u))(n)]}])}}};e.default=c}),U=G(function(C,e){var r=T&&T.__spreadArray||function(o,u){for(var i=0,n=u.length,a=o.length;i<n;i++,a++)o[a]=u[i];return o};Object.defineProperty(e,"__esModule",{value:!0});var c=function(o,u){return function(i,n,a,f){var s=i.stepsInStepGroup,l=i.stepGroups,I=a===f.length-1,m=!1,w=!I&&!u.shouldPlaceDotsAfterLineBreaks;return{stepsInStepGroup:[],stepGroups:r(r([],l),[{steps:r(r([],s),[o(y.pipe(k.withZeroIndentation,k.withDotInfo({shouldStartWithDot:m,shouldEndWithDot:w}),k.withIncreasedHorizontalPosition(s.map(function(D){var E=D.width;return E}).reduce(y.sum,0)+s.length))(u))(n)])}])}}};e.default=c}),K=G(function(C,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(c,o){return function(u,i){var n=u.stepsInStepGroup,a=u.stepGroups,f=o.localIndentation+(a[0]&&B.isTraversalSource(a[0].steps[0])?2:0),s=a.length===0,l=!s&&o.shouldPlaceDotsAfterLineBreaks,I=!1;return{stepsInStepGroup:[c(y.pipe(k.withIndentation(f),k.withDotInfo({shouldStartWithDot:l,shouldEndWithDot:I}),k.withHorizontalPosition(f))(o))(i)],stepGroups:a}}};e.default=r}),Y=G(function(C,e){var r=T&&T.__spreadArray||function(o,u){for(var i=0,n=u.length,a=o.length;i<n;i++,a++)o[a]=u[i];return o};Object.defineProperty(e,"__esModule",{value:!0});var c=function(o,u){return function(i,n){var a=i.stepsInStepGroup,f=i.stepGroups,s=u.localIndentation+a.map(function(l){var I=l.width;return I}).reduce(y.sum,0)+a.length;return{stepsInStepGroup:r(r([],a),[o(y.pipe(k.withZeroIndentation,k.withDotInfo({shouldStartWithDot:!1,shouldEndWithDot:!1}),k.withHorizontalPosition(s))(u))(n)]),stepGroups:f}}};e.default=c}),$=G(function(C,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getStepGroups=void 0;var r=function(c,o,u){return o.reduce(y.choose(B.shouldStepBeLastStepInStepGroup(u),y.choose(B.isStepFirstStepInStepGroup,Z.default(c,u),U.default(c,u)),y.choose(B.isStepFirstStepInStepGroup,K.default(c,u),Y.default(c,u))),{stepsInStepGroup:[],stepGroups:[]}).stepGroups};e.getStepGroups=r}),V=G(function(C,e){var r=T&&T.__spreadArray||function(o,u){for(var i=0,n=u.length,a=o.length;i<n;i++,a++)o[a]=u[i];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.formatTraversal=void 0;var c=function(o){return function(u){return function(i){var n=i.steps[0]&&B.isTraversalSource(i.steps[0])?i.initialHorizontalPosition:0,a=b.default(u.localIndentation+n)(i);if(a.length<=u.maxLineLength)return{type:g.TokenType.Traversal,steps:i.steps,stepGroups:[{steps:i.steps.reduce(function(I,m,w){var D=w===0?o(u)(m):o(y.pipe(k.withZeroIndentation,k.withIncreasedHorizontalPosition(i.initialHorizontalPosition+I.map(function(E){var P=E.width;return P}).reduce(y.sum,0)+I.length))(u))(m);return r(r([],I),[D])},[])}],initialHorizontalPosition:i.initialHorizontalPosition,localIndentation:0,width:a.trim().length};var f=$.getStepGroups(o,i.steps,u),s=y.last(f),l=s?s.steps.map(function(I){var m=I.width;return m}).reduce(y.sum,0)+f.length-1:0;return{type:g.TokenType.Traversal,steps:i.steps,stepGroups:f,initialHorizontalPosition:i.initialHorizontalPosition,localIndentation:0,width:l}}}};e.formatTraversal=c}),J=G(function(C,e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatWord=void 0;var r=function(c){return function(o){return{type:g.TokenType.Word,word:o.word,localIndentation:c.localIndentation,shouldStartWithDot:Boolean(c.shouldStartWithDot),shouldEndWithDot:Boolean(c.shouldEndWithDot),width:o.word.length}}};e.formatWord=r}),X=G(function(C,e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatSyntaxTrees=void 0;var r=function(o){return function(u){switch(u.type){case g.TokenType.NonGremlinCode:return R.formatNonGremlin(o)(u);case g.TokenType.Traversal:return V.formatTraversal(r)(o)(u);case g.TokenType.Method:return H.formatMethod(r)(o)(u);case g.TokenType.Closure:return N.formatClosure(r)(o)(u);case g.TokenType.String:return z.formatString(o)(u);case g.TokenType.Word:return J.formatWord(o)(u)}}},c=function(o){return function(u){return u.map(r(o))}};e.formatSyntaxTrees=c}),x=G(function(C,e){var r=T&&T.__assign||function(){return r=Object.assign||function(S){for(var h,t=1,v=arguments.length;t<v;t++){h=arguments[t];for(var O in h)Object.prototype.hasOwnProperty.call(h,O)&&(S[O]=h[O])}return S},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.extractGremlinQueries=void 0;var c="\u2985",o="\u2986",u="\u27E6",i="\u27E7",n="\u2983",a="\u2984",f="\u3002",s=function(S){var h=S.split("").reduce(function(t,v){return v==="."?r(r({},t),{word:!t.isInsideSingleQuoteString&&!t.parenthesesCount&&!t.squareBracketsCount&&!t.curlyBracketsCount?t.word+".":t.word+f}):v==="("?r(r({},t),{parenthesesCount:t.parenthesesCount+(t.isInsideSingleQuoteString?0:1),word:!t.isInsideSingleQuoteString&&!t.parenthesesCount&&!t.squareBracketsCount&&!t.curlyBracketsCount?t.word+"(":t.word+c}):v==="["?r(r({},t),{squareBracketsCount:t.squareBracketsCount+(t.isInsideSingleQuoteString?0:1),word:!t.isInsideSingleQuoteString&&!t.parenthesesCount&&!t.squareBracketsCount&&!t.curlyBracketsCount?t.word+"[":t.word+u}):v==="{"?r(r({},t),{curlyBracketsCount:t.curlyBracketsCount+(t.isInsideSingleQuoteString?0:1),word:!t.isInsideSingleQuoteString&&!t.parenthesesCount&&!t.squareBracketsCount&&!t.curlyBracketsCount?t.word+"{":t.word+n}):v===")"?r(r({},t),{parenthesesCount:t.parenthesesCount-(t.isInsideSingleQuoteString?0:1),word:!t.isInsideSingleQuoteString&&t.parenthesesCount===1&&!t.squareBracketsCount&&!t.curlyBracketsCount?t.word+")":t.word+o}):v==="]"?r(r({},t),{squareBracketsCount:t.squareBracketsCount-(t.isInsideSingleQuoteString?0:1),word:!t.isInsideSingleQuoteString&&!t.parenthesesCount&&t.squareBracketsCount===1&&!t.curlyBracketsCount?t.word+"]":t.word+i}):v==="}"?r(r({},t),{curlyBracketsCount:t.curlyBracketsCount-(t.isInsideSingleQuoteString?0:1),word:!t.isInsideSingleQuoteString&&!t.parenthesesCount&&!t.squareBracketsCount&&t.curlyBracketsCount===1?t.word+"}":t.word+a}):v==="'"?r(r({},t),{isInsideSingleQuoteString:!t.isInsideSingleQuoteString,word:t.word+"'"}):r(r({},t),{word:t.word+v})},{word:"",parenthesesCount:0,squareBracketsCount:0,curlyBracketsCount:0,isInsideSingleQuoteString:!1}).word;return h},l=function(S){return S.split(f).join(".").split(c).join("(").split(o).join(")").split(u).join("[").split(i).join("]").split(n).join("{").split(a).join("}")},I="\\s",m="[^\\S\\r\\n]",w="\\.",D="\\w+"+m+"*\\([^\\)]*\\)",E="\\w+"+m+"*\\{[^\\}]*\\}",P="\\w+",W="("+D+"|"+E+"|"+P+")",M="("+I+"*"+w+I+"*)",d="g("+M+W+")+",p=new RegExp(d,"g"),_=function(S){var h=s(S),t=h.match(p);return t?t.map(l):[]};e.extractGremlinQueries=_}),ee=G(function(C,e){var r=T&&T.__spreadArray||function(d,p){for(var _=0,S=p.length,h=d.length;_<S;_++,h++)d[h]=p[_];return d};Object.defineProperty(e,"__esModule",{value:!0}),e.parseToSyntaxTrees=e.parseNonGremlinCodeToSyntaxTree=void 0;var c=function(d){var p="",_=0,S=0,h=0,t=!1;return d.split("").forEach(function(v){if(v==="("&&!t){_++,p+="(";return}if(v==="["&&!t){S++,p+="[";return}if(v==="{"&&!t){h++,p+="{";return}if(v===")"&&!t){_--,p+=")";return}if(v==="]"&&!t){S--,p+="]";return}if(v==="}"&&!t){h--,p+="}";return}if(v==="'"){t=!t,p+="'";return}if(v==="."){p+=t||_||S||h?".":String.fromCharCode(28);return}p+=v}),p.split(String.fromCharCode(28)).filter(function(v){return v!==""}).map(function(v){return v.trim()})},o=function(d){var p="",_=0,S=0,h=0,t=!1;return d.split("").forEach(function(v){if(v==="("&&!t){_++,p+="(";return}if(v==="["&&!t){S++,p+="[";return}if(v==="{"&&!t){h++,p+="{";return}if(v===")"&&!t){_--,p+=")";return}if(v==="]"&&!t){S--,p+="]";return}if(v==="}"&&!t){h--,p+="}";return}if(v==="'"){t=!t,p+="'";return}if(v===","){p+=t||_||S||h?",":String.fromCharCode(28);return}p+=v}),p.split(String.fromCharCode(28)).filter(function(v){return v!==""}).map(function(v){return v.trim()})},u=function(d){var p="",_=0,S=!1;return d.split("").forEach(function(h){if(h==="("&&!S){_===0&&(p+=String.fromCharCode(28)),_++,p+="(";return}if(h==="["&&!S){p+="[";return}if(h==="{"&&!S){p+="{";return}if(h===")"&&!S){_--,p+=")";return}if(h==="]"&&!S){p+="]";return}if(h==="}"&&!S){p+="}";return}if(h==="'"){S=!S,p+="'";return}p+=h}),p.split(String.fromCharCode(28)).filter(function(h){return h!==""}).map(function(h){return h.trim()})},i=function(d){var p="",_=0,S=!1;return d.split("").forEach(function(h){if(h==="("&&!S){p+="(";return}if(h==="["&&!S){p+="[";return}if(h==="{"&&!S){_===0&&(p+=String.fromCharCode(28)),_++,p+="{";return}if(h===")"&&!S){p+=")";return}if(h==="]"&&!S){p+="]";return}if(h==="}"&&!S){_--,p+="}";return}if(h==="'"){S=!S,p+="'";return}p+=h}),p.split(String.fromCharCode(28)).filter(function(h){return h!==""}).map(function(h){return h.trim()})},n=function(d){return d.length<2||d.charAt(0)!=="("?!1:!(d.slice(-1)!==")")},a=function(d){return d.length<2||d.charAt(0)!=="{"?!1:!(d.slice(-1)!=="}")},f=function(d){return d.length<2||d.charAt(0)!==d.substr(-1)?!1:!!['"',"'"].includes(d.charAt(0))},s=function(d){return y.pipe(u,y.last,n)(d)},l=function(d){return y.pipe(i,y.last,a)(d)},I=function(d){return d.slice(1,-1)},m=function(d){return d.slice(1,-1)},w=function(d){var p=u(d);return{methodToken:p.slice(0,-1).join(""),argumentTokens:y.pipe(I,o)(p.slice(-1)[0])}},D=function(d){return d.split("").findIndex(y.neq(" "))},E=function(d,p){var _=i(d),S=_.slice(0,-1).join(""),h=m(_.slice(-1)[0]),t=p.substr(0,p.indexOf(h)).split(`
`).slice(-1)[0].length;return{methodToken:S,closureCodeBlock:m(_.slice(-1)[0]).split(`
`).map(function(v,O){return{lineOfCode:v.trimStart(),relativeIndentation:O===0?D(v):D(v)-t}})}},P=function(d,p){return function(_){var S=c(_);if(S.length===1){var h=S[0];if(s(h)){var t=w(h),v=t.methodToken,O=t.argumentTokens;return{type:g.TokenType.Method,method:P(d)(v),arguments:O.map(P(d))}}if(l(h)){var L=E(h,d),v=L.methodToken,A=L.closureCodeBlock;return{type:g.TokenType.Closure,method:P(d)(v),closureCodeBlock:A}}return f(h)?{type:g.TokenType.String,string:h}:{type:g.TokenType.Word,word:h}}return{type:g.TokenType.Traversal,steps:S.map(P(d)),initialHorizontalPosition:p?d.substr(0,d.indexOf(_)).split(`
`).slice(-1)[0].length:0}}},W=function(d){return{type:g.TokenType.NonGremlinCode,code:d}};e.parseNonGremlinCodeToSyntaxTree=W;var M=function(d){var p=x.extractGremlinQueries(d),_=p.reduce(function(t,v){var O=t.remainingCode.indexOf(v),L=t.remainingCode.substr(0,O);return{syntaxTrees:r(r([],t.syntaxTrees),[e.parseNonGremlinCodeToSyntaxTree(L),P(d,!0)(v)]),remainingCode:t.remainingCode.substr(O+v.length)}},{syntaxTrees:[],remainingCode:d}),S=_.syntaxTrees,h=_.remainingCode;return h?r(r([],S),[e.parseNonGremlinCodeToSyntaxTree(h)]):S};e.parseToSyntaxTrees=M}),re=G(function(C,e){Object.defineProperty(e,"__esModule",{value:!0}),e.recreateQueryStringFromFormattedSyntaxTrees=void 0;var r=function(n){return n.type===g.TokenType.NonGremlinCode?n.code:n.type===g.TokenType.Traversal?n.stepGroups.map(function(a){return a.steps.map(r).join(".")}).join(`
`):n.type===g.TokenType.Method?(n.shouldStartWithDot?".":"")+[r(n.method)+"(",n.argumentGroups.map(function(a){return a.map(r).join(", ")}).join(`,
`)+")"+(n.shouldEndWithDot?".":"")].join(n.argumentsShouldStartOnNewLine?`
`:""):n.type===g.TokenType.Closure?(n.shouldStartWithDot?".":"")+r(n.method)+"{"+n.closureCodeBlock.map(function(a,f){var s=a.lineOfCode,l=a.localIndentation;return""+y.spaces(l)+s}).join(`
`)+"}"+(n.shouldEndWithDot?".":""):n.type===g.TokenType.String?y.spaces(n.localIndentation)+n.string:n.type===g.TokenType.Word?y.spaces(n.localIndentation)+(n.shouldStartWithDot?".":"")+n.word+(n.shouldEndWithDot?".":""):""},c=function(n){return function(a){return a&&y.spaces(n)+a}},o=function(n){return n.split("").every(y.eq(" "))},u=function(n){return o(n)?"":n},i=function(n){var a=n.globalIndentation;return function(f){return f.map(r).join("").split(`
`).map(c(a)).map(u).join(`
`)}};e.recreateQueryStringFromFormattedSyntaxTrees=i}),te=G(function(C,e){var r=T&&T.__assign||function(){return r=Object.assign||function(i){for(var n,a=1,f=arguments.length;a<f;a++){n=arguments[a];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.formatQuery=void 0;var c=function(i){return r({indentation:0,maxLineLength:80,shouldPlaceDotsAfterLineBreaks:!1},i)},o=function(i){var n=i.indentation,a=i.maxLineLength,f=i.shouldPlaceDotsAfterLineBreaks;return{globalIndentation:n,localIndentation:0,maxLineLength:a-n,shouldPlaceDotsAfterLineBreaks:f,shouldStartWithDot:!1,shouldEndWithDot:!1,horizontalPosition:0}},u=function(i,n){var a=o(c(n!=null?n:{}));return y.pipe(ee.parseToSyntaxTrees,X.formatSyntaxTrees(a),re.recreateQueryStringFromFormattedSyntaxTrees(a))(i)};e.formatQuery=u}),j=G(function(C,e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatQuery=void 0,Object.defineProperty(e,"formatQuery",{enumerable:!0,get:function(){return te.formatQuery}})}),ne=Q(j);export default ne;var oe=j.formatQuery;export{j as __moduleExports,oe as formatQuery};